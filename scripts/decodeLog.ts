import { ethers,TransactionResponse,Result } from "ethers";
import * as dotenv from "dotenv";
import {abi} from '../contracts/tokens/artifacts/MyToken721.json';

dotenv.config();

async function main() {

    const iface = new ethers.Interface(abi);

    const data = "0x000000000000000000000000000000000000000000000000000000000000005600000000000000000000000000000000000000000018d0bf423c03d8de000000000000000000000000000000000000000000000000000b608be7d227741c0000000000000000000000000000000000000000000000000000022b924a6e52e4e800000000000000000000000000000000000000000000000000000000000001800000000000000000000000000000000000000000000c685fa11e01ec6f0000000000000000000000000000000000000000000000000771d2fa45345aa9000000000000000000000000000000000000000000000000013da329b6336471800000000000000000000000000000000000000000000000013da329b6336471800000000000000000000000000000000000000000000000013da329b6336471800000000000000000000000000000000000000000000000013da329b633647180000000000000000000000000000000000000000000000000000000000000000001c00000000000000000000000000000000000000000000000000000000000000007554e494d465752000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000003000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000003";

    const topics = [
      "0x65e640a39fd8bac1d47108f3384e3d7de637811431fe84d46fe3f4ab20aeb3d0",
    ];
    const res = iface.parseLog({ data, topics });
    if (res && res.args) {
        console.log("Minted Event Details:");
        console.log("Sign ID:", res.args.signId.toString());
        console.log("Yoho Amount:", res.args.yoho.toString());
        console.log("Gas AIA Amount:", res.args.gas.toString());
        console.log("Swap BNB Amount:", res.args.swapBNB.toString());
        console.log("Referral Code:", res.args.referralCode);
        console.log("Assets Ratios:", res.args.assets.map((asset: ethers.BigNumberish) => asset.toString()));
        console.log("Token IDs:", res.args.tokenIds.map((tokenId: ethers.BigNumberish) => tokenId.toString()));
    } else {
        console.log("No Minted event found or could not parse the log.");
    }
    
}

main().catch((error) => {
    console.error(error);
    process.exitCode = 1;
});


